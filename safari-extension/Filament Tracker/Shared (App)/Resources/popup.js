"use strict";(()=>{var n=document.getElementById("sync-status"),o=document.getElementById("port-input"),p=document.getElementById("sync-link"),i;function g(t){let e=new Date(t),u=Date.now()-e.getTime(),a=Math.floor(u/1e3),r=Math.floor(a/60),s=Math.floor(r/60);return a<60?"Synced just now":r<60?`Synced ${r}m ago`:s<24?`Synced ${s}h ago`:`Synced ${e.toLocaleDateString()}`}function m(t){t?.lastSyncedAt?(n.textContent=`${g(t.lastSyncedAt)} (${t.entryCount} entries)`,n.className="status synced"):(n.textContent="Not synced yet. Open your tracker app to sync.",n.className="status")}function c(t){p.href=`http://localhost:${t}`}chrome.storage.local.get(["syncState","trackerPort"],t=>{m(t.syncState);let e=t.trackerPort??3e3;o.value=String(e),c(e)});o.addEventListener("input",()=>{clearTimeout(i),i=setTimeout(()=>{let t=parseInt(o.value,10);!t||t<1||t>65535||(c(t),chrome.storage.local.set({trackerPort:t}),chrome.runtime.sendMessage({type:"SET_PORT",port:t}).catch(()=>{}))},400)});})();
